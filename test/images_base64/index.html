<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片转Base64编码工具 - 在线工具箱</title>
    <link rel="stylesheet" href="../../public/style.css">
    <link rel="stylesheet" href="tool.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.js"></script>
</head>
<body>
    <div class="page-wrapper">
        <main class="main">
            <section class="tool-page-hero">
                <div class="container">
                    <h1>图片转Base64编码工具</h1>
                    <p>将图片文件转换为Base64编码格式，支持拖拽上传和预览</p>
                </div>
            </section>

            <div class="tool-container">
                <div id="app">
                    <!-- 文件上传区域 -->
                    <div class="file-upload" id="dropZone" @dragover.prevent @drop.prevent="handleDrop" @click="triggerFileInput">
                        <input type="file" ref="fileInput" accept="image/*" style="display: none;" @change="selectFile">
                        <p>点击或拖拽图片到此处上传</p>
                        <small>支持 JPG、PNG、GIF 等常见图片格式</small>
                    </div>

                    <!-- 预览区域 -->
                    <div class="preview-area">
                        <img v-if="set.preview" :src="set.preview" alt="预览图">
                        <div v-else style="color: var(--text-secondary);">图片预览区域</div>
                    </div>

                    <!-- 代码区域 -->
                    <div class="code-container">
                        <div class="code-editor">
                            <h2>Base64编码结果</h2>
                            <textarea v-model="set.output" 
                                    placeholder="可以直接粘贴Base64编码到这里进行预览"
                                    style="width: 100%; min-height: 200px; padding: 12px; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-color); color: var(--text-color); font-family: monospace; resize: vertical; line-height: 1.5;"></textarea>
                        </div>
                        <div class="code-actions">
                            <button class="btn" @click="decode" :disabled="!set.output">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                                </svg>
                                还原预览
                            </button>
                            <button class="btn" @click="copyOutput" :disabled="!set.output">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                复制代码
                            </button>
                            <button class="btn" @click="reset" :disabled="!set.output">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4V4m4 4V4m-9 3h18"/>
                                </svg>
                                清空
                            </button>
                        </div>
                    </div>

                    <!-- 说明区域 -->
                    <div class="tool-info">
                        <h2>功能说明</h2>
                        <p>图片转Base64编码工具可以将图片文件转换为Base64编码格式，方便在网页中直接使用。</p>

                        <h3>使用说明</h3>
                        <ul>
                            <li>支持拖拽上传或点击选择图片文件</li>
                            <li>支持常见图片格式：JPG、PNG、GIF等</li>
                            <li>可以预览上传的图片</li>
                            <li>转换后可以复制Base64编码</li>
                            <li>支持将Base64编码还原预览</li>
                        </ul>

                        <h3>注意事项</h3>
                        <ul>
                            <li>建议上传较小的图片文件，过大的文件会导致Base64编码很长</li>
                            <li>Base64编码的大小约为原文件的4/3</li>
                            <li>转换后的编码可以直接用于img标签的src属性</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>

        <script src="../../public/main.js"></script>
        <script src="tool.js"></script>
    </div>
</body>
</html>